window.DB={API:{scheme:"https",host:"www.designbold.com",path:"design-it/create"}},DB.getParameterByName=function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[#&]"+a+"(=([^&]*)|&|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},1==DB.getParameterByName("debug",document.getElementById("db-js-sdk").getAttribute("src"))&&(DB.API.host="beta.designbold.com"),DB.API_CREATE=DB.API.scheme+"://"+DB.API.host+"/"+DB.API.path,DB.$=function(a){var b="querySelectorAll";return 0===a.indexOf("#")&&(b="getElementById",a=a.substr(1,a.length)),document[b](a)},DB.isElementInViewport=function(a){"function"==typeof jQuery&&a instanceof jQuery&&(a=a[0]);var b=a.getBoundingClientRect();return b.top>=0&&b.left>=0&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)},DB.bindEventHandler=function(a,b,c){var d=a.addEventListener||a.attachEvent,e=a.addEventListener?b:"on"+b;console.log(typeof d),d(e,c)},DB.unbindEventHandler=function(a,b,c){var d=a.removeEventListener||a.detachEvent,e=a.removeEventListener?b:"on"+b;d(e,c)},DB.documentReady=function(a){"loading"!=document.readyState?a():window.addEventListener?window.addEventListener("DOMContentLoaded",a):window.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&a()})},DB.FX={easing:{linear:function(a){return a},quadratic:function(a){return Math.pow(a,2)},swing:function(a){return.5-Math.cos(a*Math.PI)/2},circ:function(a){return 1-Math.sin(Math.acos(a))},back:function(a,b){return Math.pow(a,2)*((b+1)*a-b)},bounce:function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a>=(7-4*b)/11)return-Math.pow((11-6*b-11*a)/4,2)+Math.pow(c,2)},elastic:function(a,b){return Math.pow(2,10*(a-1))*Math.cos(20*Math.PI*b/3*a)}},animate:function(a){a=a||{};var b=new Date,c=setInterval(function(){var d=new Date-b,e=d/a.duration;e>1&&(e=1),a.progress=e;var f=a.delta(e);a.step(f),1==e&&(clearInterval(c),a.complete())},a.delay||10)},fadeOut:function(a,b){b=b||{};var c=1;this.animate({duration:b.duration||400,delta:function(a){return a=this.progress,DB.FX.easing.swing(a)},complete:b.complete||function(){},step:function(b){a.style.opacity=c-b}})},fadeIn:function(a,b){b=b||{};var c=0;this.animate({duration:b.duration||400,delta:function(a){return a=this.progress,DB.FX.easing.swing(a)},complete:b.complete||function(){},step:function(b){a.style.opacity=c+b}})}},DB.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},DB.startDesignTool=function(a){var b=a.currentTarget.getAttribute("data-href"),c=a.currentTarget.getAttribute("data-id"),d=DB.$('.db-overlay[data-id="'+c+'"]');if(d.length)d[0].style.display="block";else{var e=document.createElement("iframe");e.style.display="none",e.setAttribute("data-id",c),e.width="100%",e.height="100%",e.src=b,e.name="db-design-frame-"+c;var f=function(){e.removeEventListener?e.removeEventListener("load",null,!0):e.detachEvent&&e.detachEvent("onload",null),e.style.display="block",DB.$('.db-overlay[data-id="'+c+'"] .db-loading')[0].style.display="none"};e.addEventListener?e.addEventListener("load",f,!0):e.attachEvent&&e.attachEvent("onload",f);var d='<div class="db-overlay animated fadeIn" data-id="'+c+'" style="display: block;"><span class="db-close-lightbox">Ã—</span><div class="db-lightbox"><div class="db-loading"><div class="inner-circles-loader large loading-icon"></div></div></div></div>';document.body.insertAdjacentHTML("beforeend",d),DB.$('.db-overlay[data-id="'+c+'"] .db-lightbox')[0].appendChild(e),DB.$('.db-overlay[data-id="'+c+'"] .db-close-lightbox')[0].addEventListener("click",function(a){a.currentTarget.parentNode.style.display="none"})}},DB.startSDK=function(){var a=DB.$("img.db-img-design-me");if(a.length)for(var b=function(a,b){var b="undefined"!=typeof b?b:this,c=document.createElement("div"),d=b.src,e=b.getAttribute("data-db-title")||"Design It",f=(b.getAttribute("data-db-doctype")||"",b.getAttribute("data-db-width")||0),g=b.getAttribute("data-db-height")||0,h=b.getAttribute("data-db-unit")||"px",i=b.getAttribute("data-db-image")||!0,j=DB.guid();c.className="db-frame-designit",c.setAttribute("data-id",j),b.setAttribute("data-id",j),b.parentNode.insertBefore(c,b),c.appendChild(b);var k=document.createElement("a");k.className="db-btn-designit",k.href="javascript:;",k.innerHTML=e,k.setAttribute("data-id",j),k.addEventListener("click",DB.startDesignTool),i===!1||"false"==i?k.setAttribute("data-href",DB.API_CREATE+"/custom/"+f+"/"+g+"/"+h):k.setAttribute("data-href",DB.API_CREATE+"/image/"+window.btoa(d));var l=document.createElement("div");l.className="db-designit-wrap",l.appendChild(k),c.appendChild(l)},c=0;c<a.length;c++)a[c].complete?b(null,a[c]):a[c].onload=b;var d=DB.$("div.db-btn-design-me");if(d.length)for(var c=0;c<d.length;c++){var e=d[c],f=e.getAttribute("data-db-title")||"Design It",g=e.getAttribute("data-db-width")||0,h=e.getAttribute("data-db-height")||0,i=e.getAttribute("data-db-unit")||"px",j=DB.guid(),k=document.createElement("a");k.className="db-btn-designit",k.href="javascript:;",k.innerHTML=f,k.setAttribute("data-id",j),k.addEventListener("click",DB.startDesignTool),k.setAttribute("data-href",DB.API_CREATE+"/custom/"+g+"/"+h+"/"+i),e.parentNode.replaceChild(k,e)}window.addEventListener("message",function(a){var b=a.data.action||"",c=a.data.frame||"";if("#db#design-button#preview"==b){var d=a.data.src||"",e=document.getElementsByName(c);if(e.length){var f=e[0].getAttribute("data-id"),g=DB.$('img[data-id="'+f+'"]')[0];g.style.opacity="0.4",g.style.cursor="wait",g.setAttribute("data-src",g.src),g.onload=function(){g.style.opacity="1",g.style.removeProperty?g.style.removeProperty("cursor"):g.style.removeAttribute("cursor")},g.src=d,window.scrollTo(0,g.offsetTop-50)||g.scrollIntoView(!0),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap .db-btn-designit')[0].style.display="none";var h=document.createElement("a");h.href="javascript:;",h.className="db-btn-redesign",h.innerHTML="Re-Design",h.addEventListener("click",function(a){a.preventDefault(),DB.$('.db-overlay[data-id="'+f+'"]')[0].style.display="block",g.src=g.getAttribute("data-src"),g.removeAttribute("data-src"),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap')[0].removeChild(h),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap')[0].removeChild(i),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap .db-btn-designit')[0].style.display="block"}),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap')[0].appendChild(h);var i=document.createElement("a");i.href="javascript:;",i.className="db-btn-download",i.innerHTML="Download",i.addEventListener("click",function(a){a.preventDefault(),h.click(),DB.$('.db-overlay[data-id="'+f+'"] iframe')[0].contentWindow.postMessage({action:"#db#designit#download"},"*")}),DB.$('.db-frame-designit[data-id="'+f+'"] .db-designit-wrap')[0].appendChild(i),DB.$('.db-overlay[data-id="'+f+'"] .db-close-lightbox')[0].click()}}else if("#db#design-button#logout"==b){var j=a.data.href||"",e=document.getElementsByName(c);if(e.length){var f=e[0].getAttribute("data-id"),g=DB.$('img[data-id="'+f+'"]')[0],k=document.createElement("iframe");k.style.display="none",k.onload=function(a){document.body.removeChild(k)},k.src=j,document.body.appendChild(k);for(var l=DB.$(".db-overlay"),m=0;m<l.length;m++)document.body.removeChild(l[m])}}},!1)},DB.documentReady(function(){var a=document.createElement("link");a.rel="stylesheet",a.href="https://sdk.designbold.com/button/v1.0/css/designit.min.css",a.onload=DB.startSDK,document.getElementsByTagName("head")[0].appendChild(a)});